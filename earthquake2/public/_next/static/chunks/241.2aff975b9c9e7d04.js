(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[241],{7241:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var r,u,l,a,o,i=n(5893),c=n(7294);let s=(0,c.createContext)(null),f=s.Provider;function p(){let e=(0,c.useContext)(s);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var d=n(5243),g=n.n(d);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let h=(0,c.forwardRef)(function({bounds:e,boundsOptions:t,center:n,children:r,className:u,id:l,placeholder:a,style:o,whenReady:i,zoom:s,...p},g){let[h]=(0,c.useState)({className:u,id:l,style:o}),[y,v]=(0,c.useState)(null);(0,c.useImperativeHandle)(g,()=>y?.map??null,[y]);let x=(0,c.useCallback)(r=>{if(null!==r&&null===y){let u=new d.Map(r,p);null!=n&&null!=s?u.setView(n,s):null!=e&&u.fitBounds(e,t),null!=i&&u.whenReady(i),v(Object.freeze({__version:1,map:u}))}},[]);(0,c.useEffect)(()=>()=>{y?.map.remove()},[y]);let b=y?c.createElement(f,{value:y},r):a??null;return c.createElement("div",m({},h,{ref:x}),b)});var y=n(3935);function v(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function x(e,t){return null==t?function(t,n){let r=(0,c.useRef)();return r.current||(r.current=e(t,n)),r}:function(n,r){let u=(0,c.useRef)();u.current||(u.current=e(n,r));let l=(0,c.useRef)(n),{instance:a}=u.current;return(0,c.useEffect)(function(){l.current!==n&&(t(a,n,l.current),l.current=n)},[a,n,r]),u}}function b(e,t){let n=(0,c.useRef)(t);(0,c.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function C(e,t){let n=(0,c.useRef)();(0,c.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}function w(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}function E(e){return function(t){var n;let r=p(),u=e(w(t,r),r);return b(r.map,t.attribution),C(u.current,t.eventHandlers),n=u.current,(0,c.useEffect)(function(){return(r.layerContainer??r.map).addLayer(n.instance),function(){r.layerContainer?.removeLayer(n.instance),r.map.removeLayer(n.instance)}},[r,n]),u}}let j=(r=E(x(function({url:e,...t},n){return v(new d.TileLayer(e,w(t,n)),n)},function(e,t,n){!function(e,t,n){let{opacity:r,zIndex:u}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=u&&u!==n.zIndex&&e.setZIndex(u)}(e,t,n);let{url:r}=t;null!=r&&r!==n.url&&e.setUrl(r)})),(0,c.forwardRef)(function(e,t){let{instance:n}=r(e).current;return(0,c.useImperativeHandle)(t,()=>n),null})),O=(u=E(x(function({position:e,...t},n){let r=new d.Marker(e,t);return v(r,Object.freeze({...n,overlayContainer:r}))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())})),(0,c.forwardRef)(function(e,t){let{instance:n,context:r}=u(e).current;return(0,c.useImperativeHandle)(t,()=>n),null==e.children?null:c.createElement(f,{value:r},e.children)})),I=(l=x(function(e,t){return v(new d.Popup(e,t.overlayContainer),t)}),a=function(e,t,{position:n},r){(0,c.useEffect)(function(){let{instance:u}=e;function l(e){e.popup===u&&(u.update(),r(!0))}function a(e){e.popup===u&&r(!1)}return t.map.on({popupopen:l,popupclose:a}),null==t.overlayContainer?(null!=n&&u.setLatLng(n),u.openOn(t.map)):t.overlayContainer.bindPopup(u),function(){t.map.off({popupopen:l,popupclose:a}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(u)}},[e,t,r,n])},o=function(e,t){let n=p(),r=l(w(e,n),n);return b(n.map,e.attribution),C(r.current,e.eventHandlers),a(r.current,n,e,t),r},(0,c.forwardRef)(function(e,t){let[n,r]=(0,c.useState)(!1),{instance:u}=o(e,r).current;(0,c.useImperativeHandle)(t,()=>u),(0,c.useEffect)(function(){n&&u.update()},[u,n,e.children]);let l=u._contentNode;return l?(0,y.createPortal)(e.children,l):null}));n(8570);var L=()=>{let[e,t]=(0,c.useState)([]),[n,r]=(0,c.useState)("");(0,c.useEffect)(()=>{n&&u()},[n]);let u=async()=>{try{let e=await fetch("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.atom"),r=await e.text(),u=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("entry"),l=[];for(let e=0;e<u.length;e++){let t=u[e],r=t.getElementsByTagName("title")[0].textContent,a=t.getElementsByTagName("summary")[0].textContent,o=t.getElementsByTagName("georss:point")[0].textContent.split(" "),i=parseFloat(o[0]),c=parseFloat(o[1]);new Date(t.getElementsByTagName("updated")[0].textContent).toISOString().split("T")[0]===n&&l.push({title:r,summary:a,latitude:i,longitude:c})}t(l)}catch(e){console.error("Error fetching earthquake data:",e)}},l=g().icon({iconUrl:"../images/shingentimark.jpg",iconSize:[30,30],iconAnchor:[15,30]});return(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"date",value:n,onChange:e=>{r(e.target.value)}}),(0,i.jsx)("button",{onClick:u,children:"地震情報を確認"}),(0,i.jsxs)(h,{center:[35,1],zoom:3,style:{height:"95vh",width:"100%"},children:[(0,i.jsx)(j,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.map((e,t)=>(0,i.jsx)(O,{position:[e.latitude,e.longitude],icon:l,children:(0,i.jsx)(I,{children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:e.title}),(0,i.jsx)("p",{children:e.summary}),(0,i.jsxs)("p",{children:["Latitude: ",e.latitude,", Longitude:"," ",e.longitude]})]})})},t))]})]})}},8570:function(){}}]);